更新日志 / CHANGELOG
==========
This project only supports Chinese docs. If you are an English user, feel free to contact us.

## v2.0
此版本发生了革命性的变化
#### 新增
1. (重要) 支持且默认以多线程模式运行资源解包和图片合并。多线程以增加单位时间内的CPU占用率为代价，极大地提升了运行速度。
> 速度对比 / 2.0 VS 1.2  
> 多线程提速效果因电脑配置而异。在作者的电脑上，使用16线程的测试结果：  
> -- 资源解包速度 是原来的`270%`  
> -- 图片合并速度 是原来的`210%`  
2. 支持在自定义模式下用户可以选择最大执行线程数。

#### 优化
1. 优化了运行时的回显：减少了简洁模式中`print()`的调用次数，以提升运行速度。
2. 优化了图片匹配的精确度：调整了算法的关键参数。

#### 其他
1. 不再支持流式显示运行时的详细信息，现在都只以简洁模式（进度条模式）回显信息。


## v1.2
#### 新增
1. (重要) 支持将不同ab文件中解包出的文件分别放到不同的子文件夹中，以便分类保存。
2. (重要) 支持显示任务的剩余时间。

#### 优化
1. 优化了目录创建的回显：现在不会轻易回显这类信息，以提升运行速度。

#### 其他
1. 不再以`Main-vx.x.py`的形式命名主程序文件，现在统一使用`Main.py`命名。

#### 测试数据
本程序在作者的电脑上测试结果如下：
> 电脑配置  
> -- Windows 10 (64位)  
> -- CPU基频：2.00GHz  
> -- RAM内存：8.00GB  
> 明日方舟版本  
> -- Android v1.8.81  
> 测试内容  
> -- “一键执行”整个Android文件夹  
> -- 源文件夹：5.06GB(6.6K个文件)  
> 测试结果  
> -- 用时：3.0h  
> -- 错误：未发生  
> -- 资源解包文件夹：20.1GB(70K个文件)  
> -- 图片合并文件夹：2.03GB(5.2K个文件)  


## v1.1
#### 新增
1. 新增了程序文件的图标。
2. 新增了程序运行时的窗口标题。
3. (重要) 新增了`communalTool.py`用于提供正确地保存文件的相关函数。

#### 优化
1. 优化了`ResolveAB.py`的代码逻辑：添加了`resource`类来辅助解包和导出。
2. 优化了`UnityPy`库的引入方式。
3. 优化了`os.path`函数的调用方式：一些频繁使用该函数的代码段将其作为局部变量调用以提升运行速率。
4. (重要) 优化了字符串的加载：使用了`f-string`来提升字符串的拼接速度和代码简洁度。
5. (重要) 优化了文件列表的解析和筛选逻辑：使用`filter`对文件列表执行初筛以提升运行速率。
6. (重要) 优化了文件的保存逻辑：当文件夹内存在文件名相似、内容完全相同的文件时，不会进行保存操作。
7. (重要) 优化了图片合并的算法：现在使用`PIL.Image`的内置函数`putalpha`来合并RGB通道图和A通道图，经测试，图片合并的运行速率居然提升了4倍。
8. 优化了图片合并时的信息回显。

#### 修复
1. (重要) 修复了干员战斗小人相关资源由于重名而不能正确地全部导出的问题。
2. 修复了图片合并时不能按目录分别保存的问题。
3. 修复了代码中的一些不重要的拼写错误。
4. (重要) 修复了干员战斗小人相关图片无法被正确地匹配和合并的问题。
5. (重要) 修复了重名的文件保存冲突的问题：现在会自动添加`_#`后缀来区分重名的文件，且不再需要用户配置是否执行覆盖(docover)。
6. 修复了在试图保存大小为0的图片时报出意外错误的问题：现在这些无用图片会被直接跳过。
7. (重要) 修复了不能准确匹配RGB通道图和A通道图的问题，此问题主要发生在针对资源文件夹`skinpack`内的图片的合并中：经过算法调整已能正确匹配，但不排除还有极个别匹配错误。

#### 其他
1. 解决了可执行文件中可能潜在的`fmod.dll`缺失的问题。
2. 采用了文件虚拟化技术打包可执行文件。

#### 测试数据
本程序在作者的电脑上测试结果如下：
> 电脑配置  
> -- Windows 10 (64位)  
> -- CPU基频：2.00GHz  
> -- RAM内存：8.00GB  
> 明日方舟版本  
> -- Android v1.8.01  
> 测试内容  
> -- “一键执行”整个Android文件夹  
> -- 源文件夹：4.74GB(5.9K个文件)  
> 测试结果  
> -- 用时：2.5h  
> -- 错误：未发生  
> -- 资源解包文件夹：18.4GB(57K个文件)  
> -- 图片合并文件夹：1.90GB(5.4K个文件)  
