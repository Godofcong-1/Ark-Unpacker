ArkUnpacker附加说明文档
# 必备知识

### RGB通道图和A通道图
明日方舟的大部分图片（例如角色立绘、小人图片等）从AB文件中提取出来后，并不是单独的一张图片，而是两张图片：一张有颜色的图（称为RGB通道图），一张只有黑白灰的图（称为A通道图，文件名通常有"alpha"字样）。  
A通道图中，完全白色的部分表示这里是不透明的，完全黑色的部分表示这里是透明的。欲获得完整的既有颜色又能显示透明度的图片，需要进行图片合并。本项目的功能之一就是自动识别A通道图，然后自动找到对应的RGB通道图，将其合并为完整的图片并保存。

### Spine动画小人
明日方舟的小人角色是使用[Spine动画技术](http://esotericsoftware.com)实现的。明日方舟里一套完整的Spine动画通常包含3个文件：包含了各个零散素材的**png图片**、标注各个素材在图片中的位置的**atlas文件**、存储骨骼动画的**skel文件**。  
需要特别注意的是，干员战斗小人具有正面和背面之分，但是在AB文件中它们的png、atlas、skel文件的文件名完全一样。经过攻关，本项目已可以实现区分atlas、skel的正背面，并在解包时将其放入单独的文件夹`BattleFront`和`BattleBack`，（敌人小人和干员基建小人不存在此问题，它们只有正面）。但是，png的正背面尚不能有效区分，解包时会把它们命名为类似于"`xxxx_#1.png`"的形式避免混淆和覆盖。由于小人图片也是RGB和A分离的，因此一个干员会有4张战斗小人图片解包出来，在图片合并时，本项目可以使用特殊算法自动把它的A通道图和RGB通道图进行配对，最终一个干员会有2张战斗小人图片。
